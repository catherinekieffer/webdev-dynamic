<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <h1>Flights</h1>
    <p>Choose a filter</p>
    <input type="radio" id="airline"><label id = "radio-label1" for="airline">Airline</label>
    <input type="radio" id="ask"><label id = "radio-label2" for="ask">ASK / Week</label>
    <input type="radio" id="date"><label id = "radio-label3" for="date">Date Range</label>
    <div id="filter"></div>



    <script>
        let radio1 = document.getElementById("radio-label1");
        let radio2 = document.getElementById("radio-label2");
        let radio3 = document.getElementById("radio-label3");
        let radioData1 = document.getElementById("airline");
        let radioData2 = document.getElementById("ask");
        let radioData3 = document.getElementById("date");
        
        function check(){
            radioData1.checked = false;
            radioData2.checked = false;
            radioData3.checked = false;
            removeChildren(filter);
        }
        window.onload = check;
        radio1.addEventListener('mouseup', check);
        radio2.addEventListener('mouseup', check);
        radio3.addEventListener('mouseup', check);
        radioData1.addEventListener('mouseup', check);
        radioData2.addEventListener('mouseup', check);
        radioData3.addEventListener('mouseup', check);


        radio2.addEventListener('mouseup', filterAsk);
        radioData2.addEventListener('mouseup', filterAsk);

        let filter = document.getElementById('filter');
        function filterAsk(){
            let form = makeElement('form', {onsubmit:test});
            let select = makeElement('select', {id: 'EQ'});
            let eq = makeElement('option', {value:'eq', text:'='});
            let gt = makeElement('option', {value:'gt', text:'>'});
            let lt = makeElement('option', {value:'lt', text:'<'});
            let gte = makeElement('option', {value:'gte', text:'≥'});
            let lte = makeElement('option', {value:'lte', text:'≤'});
            let numInput = makeElement('input', {id: 'KM-NUM', type: 'number', min: '0'});
            let submit = makeElement('input', {type: 'submit', name: 'Search'});
            link(select, [eq, gt, lt, gte, lte]);
            link(form, [select, numInput, submit]);
            filter.appendChild(form);
        }

        function makeElement(type, attributes){
            let element = document.createElement(type);
            let attributesList = Object.keys(attributes);
            attributesList.forEach(attr => {
                let val = attributes[attr];
                element[attr] = val;
            });
            return element;
        }

        function removeChildren(parent){
            children = parent.children;
            for(let i=0; i<children.length; i++){
                parent.removeChild(children[i]);
            }
        }

        function link(parent, children){
            children.forEach(child => {
                parent.appendChild(child);
            });
        }

        function test(){
            let equality = document.getElementById('EQ').value;
            let num = document.getElementById('KM-NUM').value;
            window.location.replace('/km/'+equality+"/"+num+"/1");
            return false;
        }

    </script>
</body>
</html>